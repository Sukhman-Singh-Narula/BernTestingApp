Based on the logs you've shared, it looks like there's an issue with the Patronus API calls that's preventing your logs from being recorded properly. The errors in your logs show that the requests to the Patronus API are consistently failing with a 422 status code (Unprocessable Entity).

Looking at the error details, the problem appears to be with the formatting of the tags sent to the Patronus API. The API is expecting string values for certain fields, but your application is sending numeric values for fields like "id", "activityId", and "stepNumber":

```
{"type":"string_type","loc":["body","tags","id"],"msg":"Input should be a valid string","input":1}
```

Additionally, there are pattern mismatch errors for several fields in the tags object:

```
{"type":"string_pattern_mismatch","loc":["body","tags","description"],"msg":"String should match pattern..."
```

The Patronus API expects these strings to match a specific pattern (likely only allowing certain characters), but your application is sending strings that don't conform to this pattern.

Here's what you can do to fix this:

1. Modify the `patronus.ts` file to stringify numeric values in the tags object and sanitize string values to match the expected pattern.

2. In the `evaluateMessage` method of the `PatronusClient` class, update the tags handling:

```typescript
// Convert all tag values to strings and sanitize them
const sanitizedTags = Object.entries({
  ...this.defaultMetadata,
  ...stepData
}).reduce((acc, [key, value]) => {
  acc[key] = this.sanitizeText(String(value));
  return acc;
}, {} as Record<string, string>);

const payload = {
  // ...other payload properties
  tags: sanitizedTags
};
```

3. Enhance the `sanitizeText` method to match Patronus's expected pattern precisely:

```typescript
private sanitizeText(text: string): string {
  if (!text) return '';
  // Only keep alphanumeric characters, spaces, and a limited set of symbols
  return text.replace(/[^\p{L}\p{Z}\p{N}_.:/=+\-@]/gu, '_');
}
```

The logs show that the issue is specifically with the API accepting the tags in your payload, not with your entire integration. The patronus middleware appears to be running correctly, but the subsequent API calls are failing with validation errors.

Once you make these changes, the Patronus API should accept your requests, and your logs should start appearing in your Patronus account.